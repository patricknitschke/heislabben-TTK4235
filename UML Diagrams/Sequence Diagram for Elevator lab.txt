title Sequence Diagram for Elevator lab

activate Main

//START - IN IDLE STATE
note left of Main:In IDLE state
Main->FSM:state_idle()
activate FSM

FSM->Queue:queue_count()
activate Queue
FSM<<--Queue:0
deactivate Queue

Main<--FSM:IDLE
deactivate FSM

//LOOP 1 - IDLE TO DRIVING
note left of Main:1. IDLE to DRIVING
Main->>Queue:queue_listen_n_find()
activate Queue
//-------------------------------------------------*YOU ARE HERE*---------------- //
space 0

deactivate Queue
Main->FSM:state_idle()
activate FSM
FSM->Queue:queue_count()
activate Queue
FSM<<--Queue:1
deactivate Queue
Main<--FSM:DRIVING
deactivate FSM


//LOOP 2 - DRIVING 2nd to 1st
note left of Main:2. Driving - 2nd to 1st
loop While current_state = DRIVING

Main->>Queue:queue_listen_n_find()
activate Queue
space 0
deactivate Queue

Main->FSM:state_driving()
activate FSM

Main<--FSM:DRIVING
deactivate FSM
end

//LOOP 3 - DRIVING TO PICKUP
note left of Main:3. DRIVING to PICKUP
Main->>Queue:queue_listen_n_find()
activate Queue

space 0

deactivate Queue
Main->FSM:state_driving()
activate FSM
Main<--FSM:PICKUP
deactivate FSM

//LOOP 4 - PICKUP TO DRIVING
note left of Main:4. PICKUP to DRIVING
Main->>Queue:queue_listen_n_find()
activate Queue

space 0

deactivate Queue
Main->FSM:state_pickup()
activate FSM
Main<--FSM:DRIVING
deactivate FSM

//LOOP 5 - DRIVING 1st to 4th
note left of Main:5. Driving - 1st to 4th
loop While current_state = DRIVING

Main->>Queue:queue_listen_n_find()
activate Queue

space 0
deactivate Queue

Main->FSM:state_driving()
activate FSM

Main<--FSM:DRIVING
deactivate FSM
end

//LOOP 6 - DRIVING TO PICKUP
note left of Main:6. DRIVING to PICKUP
Main->>Queue:queue_listen_n_find()
activate Queue

space 0

deactivate Queue
Main->FSM:state_driving()
activate FSM
Main<--FSM:PICKUP
deactivate FSM

//LOOP 7 - PICKUP not 3 seconds yet
note left of Main:7. PICKUP - wait on timer
loop While current_state = PICKUP

Main->>Queue:queue_listen_n_find()
activate Queue

space 0

deactivate Queue
Main->FSM:state_pickup()
activate FSM
Main<--FSM:PICKUP
deactivate FSM
end

//LOOP 8 - PICKUP TO IDLE
note left of Main:8. PICKUP to IDLE
Main->>Queue:queue_listen_n_find()
activate Queue

space 0

deactivate Queue
Main->FSM:state_pickup()
activate FSM
Main<--FSM:IDLE
deactivate FSM